// @ts-nocheck
function highlightCurrentPage(){const e=document.querySelectorAll("nav ul li a"),t=window.location.pathname.split("/").pop();e.forEach((e=>{e.getAttribute("href")===t?e.classList.add("active"):e.classList.remove("active")}))}function openModal(e){const t=document.getElementById(e),n=document.getElementById("overlay");t.style.display="block",t.setAttribute("aria-hidden","false"),n.classList.add("active")}function closeModal(e){const t=document.getElementById(e),n=document.getElementById("overlay");t.style.display="none",t.setAttribute("aria-hidden","true"),n.classList.remove("active")}document.addEventListener("DOMContentLoaded",(async()=>{console.log("JavaScript Loaded!");const e=document.querySelector(".more-button"),t=document.querySelector(".more-nav");e&&t&&(e.addEventListener("click",(function(e){e.stopPropagation(),t.classList.toggle("show"),t.classList.contains("show")?t.style.zIndex="10":t.style.zIndex=""})),document.addEventListener("click",(function(e){e.target.closest(".more")||(t.classList.remove("show"),t.style.zIndex="")}))),document.getElementById("currentyear").textContent=(new Date).getFullYear(),document.getElementById("lastModified").textContent=`Last Modified: ${document.lastModified}`;const n=document.getElementById("hamburger"),s=document.getElementById("nav-menu");n&&s&&n.addEventListener("click",(()=>{n.classList.toggle("active"),s.classList.toggle("active"),s.setAttribute("aria-expanded",s.classList.contains("active").toString()),s.classList.contains("active")?s.style.zIndex="10":s.style.zIndex=""}));const r="662df6608d27989682cde58fcce87ad6",a=`https://api.openweathermap.org/data/2.5/weather?q=Timbuktu&units=metric&appid=${r}`,i=`https://api.openweathermap.org/data/2.5/forecast?q=Timbuktu&units=metric&appid=${r}`;const o=document.getElementById("gridView"),c=document.getElementById("listView"),d=document.querySelector(".business-listings");if(o&&c&&d){async function l(){try{const e=await fetch("data/members.json");if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();return Array.isArray(t)?t:[]}catch(e){return console.error("Error fetching data:",e),[]}}function m(e,t){d.className=`business-listings ${t}`,d.innerHTML="",Array.isArray(e)&&0!==e.length?e.forEach((e=>{const t=document.createElement("div");t.className="business-card",t.innerHTML=`\n                    <div class="business-info">\n                        <h3>${e.name}</h3>\n                        <p>${3===e.membershipLevel?"ðŸ¥‡Gold":2===e.membershipLevel?"ðŸ¥ˆSilver":""} Member</p>\n                        <p class="description">${e.description}</p>\n                    </div>\n                    <div class="business-contact">\n                        <img src="${e.image}" alt="${e.name}" loading="lazy">\n                        <div>\n                            <p><strong>Address:</strong> ${e.address}</p>\n                            <p><strong>Phone:</strong> <a href="tel:${e.phone}">${e.phone}</a></p>\n                            <p><strong>Website:</strong> <a href="${e.website}" target="_blank">${e.website}</a></p>\n                        </div>\n                    </div>\n                `,d.appendChild(t)})):d.innerHTML="<p>No members found.</p>"}o.addEventListener("click",(async()=>{m(await l(),"grid")})),c.addEventListener("click",(async()=>{m(await l(),"list")})),l().then((e=>{m(e,"grid")}))}await async function(){try{const e=await fetch(a),t=await fetch(i);if(!e.ok||!t.ok)throw new Error("Failed to fetch weather data");const n=await e.json(),s=await t.json(),r=document.getElementById("current-temp"),o=document.getElementById("weather-description"),c=document.getElementById("forecast");if(r&&o&&c){r.innerHTML=`<strong>Current Temperature:</strong> ${Math.round(n.main.temp)}Â°C`,o.innerHTML=`<strong>Conditions:</strong> ${n.weather.map((e=>e.description)).join(", ")}`,o.innerHTML+=`<br><strong>Humidity:</strong> ${n.main.humidity}%`,o.innerHTML+=`<br><strong>Wind Speed:</strong> ${n.wind.speed} m/s`,o.innerHTML+=`<br><strong>Pressure:</strong> ${n.main.pressure} hPa`,o.innerHTML+=`<br><strong>Visibility:</strong> ${n.visibility/1e3} km`,o.innerHTML+=`<br><strong>Cloudiness:</strong> ${n.clouds.all}%`,o.innerHTML+=`<br><strong>Sunrise:</strong> ${new Date(1e3*n.sys.sunrise).toLocaleTimeString()}`,o.innerHTML+=`<br><strong>Sunset:</strong> ${new Date(1e3*n.sys.sunset).toLocaleTimeString()}`,o.innerHTML+=`<br><strong>Feels Like:</strong> ${Math.round(n.main.feels_like)}Â°C`,o.innerHTML+=`<br><strong>Weather Main:</strong> ${n.weather[0].main}`;const e=`<img src="https://openweathermap.org/img/wn/${n.weather[0].icon}@2x.png" alt="${n.weather[0].description}" />`;o.innerHTML+=e,c.innerHTML="";const t=new Set;s.list.forEach((e=>{const n=new Date(1e3*e.dt),s=new Date,r=n.toDateString()===s.toDateString()?"Today":n.toLocaleDateString("en-US",{weekday:"long"});!t.has(r)&&t.size<3&&(t.add(r),c.innerHTML+=`<p>${r}: ${Math.round(e.main.temp)}Â°C</p>`)}))}}catch(e){console.error("Error fetching weather data:",e)}}(),await async function(){try{const e=await fetch("data/members.json");if(!e.ok)throw new Error("Failed to fetch members data");const t=await e.json(),n=t.filter((e=>e.membershipLevel>=2)).sort((()=>.5-Math.random())).slice(0,3),s=document.querySelector(".spotlight-container");s&&(s.innerHTML="",n.forEach((e=>{s.innerHTML+=`\n                        <div class="business-card">\n                            <h3>${e.name}</h3>\n                            <img src="${e.image}" alt="${e.name}" loading="lazy">\n                            <p class="description">${e.description}</p>\n                            <p><strong>Phone:</strong> ${e.phone}</p>\n                            <p><strong>Address:</strong> ${e.address}</p>\n                            <p><strong>Website:</strong> <a href="${e.website}" target="_blank">${e.website}</a></p>\n                            <p><strong>Membership:</strong> ${3===e.membershipLevel?"ðŸ¥‡Gold":"ðŸ¥ˆSilver"}</p>\n                        </div>\n                    `})))}catch(e){console.error("Error fetching spotlight members:",e)}}()})),window.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".membership-cards .card").forEach(((e,t)=>{setTimeout((()=>e.classList.add("loaded")),200*t)}));const e=document.getElementById("timestamp");e&&(e.value=(new Date).toISOString()),highlightCurrentPage()}));const params=new URLSearchParams(window.location.search),fields=["firstName","lastName","email","phone","business","timestamp"],list=document.getElementById("confirmationDetails");fields.forEach((e=>{if(params.has(e)){const t=document.createElement("li");t.textContent=`${e.replace(/([A-Z])/g," $1")}: ${params.get(e)}`,list.appendChild(t)}}));